---
layout: slides
title: 'XMPP-FTW'
description: 'XMPP-FTW: Powerful XMPP, simple JSON'
theme: night
---

<div class="slides">
				<section><h1>XMPP-FTW<br>
</h1>
<div>
<img src="http://media.urbandictionary.com/image/large/aardvark-14342.jpg"><br>
</div>
<div>Lloyd Watkin</div>
<div>lloyd@evilprofessor.co.uk ::: @lloydwatkin</div></section><section><h2 style="text-align: center;">Quick poll</h2>
<div style="text-align: center;"><br></div>
<div>
<br><span style="font-size: 30.0px;letter-spacing: -0.02em;line-height: 1.2em;">Who knows what XMPP is?</span><br><br><span style="font-size: 30.0px;letter-spacing: -0.02em;line-height: 1.2em;">Who has used XMPP?</span><br><br><span style="font-size: 30.0px;letter-spacing: -0.02em;line-height: 1.2em;">Who uses XMPP?</span><br><br><span style="font-size: 30.0px;letter-spacing: -0.02em;line-height: 1.2em;">Who runs their own server?</span><br>
</div></section><section><h2>
    <br>
</h2>
<h2>
   
        <br>
</h2>
<h2>
    <span style="font-size: 2.11em;letter-spacing: -0.03em;line-height: 0.9em;">♫</span>
    <br>
</h2>
<h2>
<font color="#ffff00">lloyd@evilprofessor.co.uk</font> </h2>
<h2>♫ </h2>
</section><section><section><h2>What is XMPP?</h2>
<div>
    <br>
</div>
<div>eXtensible Messaging and Presence Protocol</div>
<div>(aka Jabber)</div>
<div>
    <br>
</div>
<div>Started around 1998</div>
<div>Became part of IETF in 2002</div>
<div>
    <br>
</div>
<div>
    <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/9/95/XMPP_logo.svg/220px-XMPP_logo.svg.png" style="padding: 10.0px;"><br>
</div>
</section><section><h2>Think you don't use XMPP?</h2>
<div><br></div>
<div><font color="#00ccff">Google Talk</font></div>
<div><font color="#ff0000">Facebook Chat</font></div>
<div><font color="#00ff00">Android Intents</font></div>
<div><font color="#ff6600">Whatsapp</font></div>
<div><font color="#ff0066">Zoosk</font></div>
<div><br></div>
<div>Internet of things</div>
<div>Utility companies</div>
<div>Gaming applications</div>
<div><br></div>
<div><br></div>
<div>Many, many more places which don't advertise its usage...</div></section><section><h2>What is it?</h2>
<div><br></div>
<div>Came about in an era of closed protocol chat systems:</div>
<div>AIM, ICQ, Yahoo! Messenger, etc</div>
<div><font color="#ffff00"><br></font></div>
<div><font color="#ffff00">Designed to be like the web</font></div>
<div> </div>
<div><ul>
<li>
<span style="line-height: 1.2em;text-align: center;font-size: 30.0px;letter-spacing: -0.02em;">Open standard</span><br>
</li>
<li><span style="line-height: 1.2em;text-align: center;font-size: 30.0px;letter-spacing: -0.02em;">Federated</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Secure</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Scalable (messages are pushed)</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Decentralised</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Asynchronous</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Community</span></li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Proven (14 years old)</span></li>
</ul></div>
<div><br></div></section><section><h2>Where XMPP wins</h2>
<div>At its core very simple set of functionality:</div>
<div>IM and Presence</div>
<div><br></div>
<div>The 'X' is what makes XMPP such a a great system:</div>
<div><br></div>
<div>
<ul>
<li>Multi-user chat [XEP-0045]</li>
<li>Publish-Subscribe [XEP-0060]</li>
<li>Jingle (P2P media sessions) [XEP-0166]</li>
</ul>
<div style="text-align: left;"><br></div>
</div>
<div style="text-align: left;">
<a href="http://xmpp.org/xmpp-protocols/xmpp-extensions/">http://xmpp.org/xmpp-protocols/xmpp-extensions/</a> (XEP-0319)</div>
<div style="text-align: left;"><br></div>
<div style="text-align: left;">People also build their own or overload existing standards e.g.</div>
<div style="text-align: left;"><ul>
<li>
<span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">buddycloud</span><br>
</li>
<li><span style="line-height: 1.2em;font-size: 30.0px;letter-spacing: -0.02em;">Chesspark (uses MUC as a data transport)</span></li>
</ul></div>
<div style="text-align: left;"><br></div></section><section><h2>Concepts</h2>
<div>
    <br>
</div>
<div>JID: Your unique identifier on the network</div>
<div>
    <br>
</div>
<div>
    <font color="#ffff00">lloyd</font>@<font color="#0099cc">evilprofessor.co.uk</font>/<font color="#00ff00">mozldn</font>
</div>
<div>
    <font color="#00ff00">
        <br></font>
</div>
<div>
    <ul>
<li>
            <font color="#ffff00" style="line-height: 1.2em;text-align: center;font-size: 30.0px;letter-spacing: -0.02em;">lloyd</font>: Username
            <br>
</li>
        <li>
            <font color="#0099cc" style="line-height: 1.2em;text-align: center;font-size: 30.0px;letter-spacing: -0.02em;">evilprofessor.co.uk</font>: Domain
            <br>
</li>
        <li>
            <span style="color: rgb(0,255,0);line-height: 1.2em;text-align: center;font-size: 30.0px;letter-spacing: -0.02em;">mozldn</span>: Resource
            <br>
</li>
    </ul>
<div style="text-align: left;"><br></div>
<div style="text-align: left;">A user can be logged in from multiple resources at once (phone, desktop, laptop, tablet, etc). </div>
<div style="text-align: left;"><br></div>
<div style="text-align: left;">Each can have a priority which helps route messages to the appropriate device.</div>
</div>
</section><section><h2>XMPP Base Messages</h2>
<div style="text-align: left;">Messages:</div>
<div style="text-align: left;">
<span style="line-height: 1.2em;letter-spacing: -0.02em;">    </span><span style="color: rgb(0,153,204);line-height: 1.2em;letter-spacing: -0.02em;">&lt;message from="lloyd@evilprofessor.co.uk/moxldn"    </span>
</div>
<div style="text-align: left;"><font color="#0099cc">                       to="megan@evilprofessor.co.uk/home" </font></div>
<div style="text-align: left;"><font color="#0099cc">                       type="chat"&gt;</font></div>
<div style="text-align: left;"><font color="#0099cc">        &lt;body&gt;I'm giving my talk at MozLdn&lt;/body&gt;</font></div>
<div style="text-align: left;"><font color="#0099cc">    &lt;/message&gt;</font></div>
<div style="text-align: left;"><br></div>
<div style="text-align: left;">Presence:</div>
<div style="text-align: left;">    <font color="#00ff00">&lt;presence type="dnd"&gt;</font>
</div>
<div style="text-align: left;"><font color="#00ff00">        &lt;status&gt;Giving a talk....&lt;/status&gt;</font></div>
<div style="text-align: left;"><font color="#00ff00">    &lt;/presence&gt;</font></div>
<div style="text-align: left;"><br></div>
<div style="text-align: left;">IQ:</div>
<div style="text-align: left;">    <font color="#ff0000">&lt;iq to="lloyd@evilprofessor.co.uk" id="1"&gt;</font>
</div>
<div style="text-align: left;"><font color="#ff0000">        &lt;query xmlns="jabber:iq:roster" /&gt;</font></div>
<div style="text-align: left;"><font color="#ff0000">    &lt;/iq&gt;</font></div></section></section><section><h2>...but there's a problem</h2>
<div>XMPP *is* real-time on the web</div>
<div>
    <br>
</div>
<div>...but its not real-time in the web-browser (yet)</div>
<div>
    <br>
</div>
<div>People are building new silos and solving the same problems already solved with XMPP</div>
<div>
    <br>
</div>
<div>Why?</div>
<div>
    <img src="http://blog.apigee.com/sites/default/files/xmlLogo.png" style="height: 8.0em;"><br>
</div>
<div>
    <br>
</div>
<div>
    <br>
</div>

</section><section><h2>What's wrong with XML?</h2>
<div><br></div>
<div>
<ul>
<li><span style="letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Many web developers exposure hasn't been great</span></li>
<li><span style="letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Slow in the browser</span></li>
<li><span style="letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Takes lots of code to build XML objects</span></li>
</ul>
<div style="text-align: left;"><br></div>
</div>
<div>
<img src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRT_LURAgRGRPoeKP4jl3V-zt0vzdP-DGcuwMyjt4_ETN6Aidf6TA" style=""><br>
</div>
<div>The browser is all about JSON: <font color="#00ff33">quick, simple, fast</font>
</div>
<div><br></div>
<div>Web developers also want <font color="#0099cc">minimal APIs</font> and <font color="#0099cc">fast implementation</font>
</div></section><section><h2>Solutions</h2>
<div>
    <a href="http://xmpp.org/extensions/xep-0295.html">http://xmpp.org/extensions/xep-0295.html</a> (JOKE!)<br>
</div>
<div>

<pre style="padding: 2.0px;border: 1.0px solid rgb(136,136,136);color: rgb(0,0,0);font-size: small;line-height: 16.0px;background-color: rgb(255,255,255);">
    <span style="color: rgb(102,102,0);">{</span><span style="color: rgb(0,136,0);">"s"</span><span style="color: rgb(102,102,0);">:</span><span style="color: rgb(0,136,0);">"&lt;message to='alice@wonderland.lit' id='if00lu'&gt;&lt;body&gt;Hi you&lt;/body&gt;&lt;body xml:lang='cy'&gt;Prynhawn da&lt;/body&gt;&lt;nick xmlns='http://jabber.org/protocol/nick'&gt;Alice&lt;/nick&gt;&lt;active xmlns='http://jabber.org/protocol/chatstates'/&gt;&lt;/message&gt;"</span>
    <span style="color: rgb(102,102,0);">}</span>
    </pre>
</div>
<div>
<ul><li><span style="line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Write better client libraries</span></li></ul>
<span style="letter-spacing: -0.02em;line-height: 1.2em;"><div>
<span style="letter-spacing: -0.02em;line-height: 1.2em;">(open source project at CISCO, strophe.js)</span><br>
</div></span>
</div>
<div><br></div>
<div><ul><li>
<span style="line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Rewrite XMPP to use JSON natively</span><br>
</li></ul></div>
<div>- throwing away lots of experience/learning/standards</div>
<div>- which server do you pick?</div>
<div><br></div>
<div><ul><li><span style="color: rgb(0,255,51);line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Translate XML ↔ JSON</span></li></ul></div>
<div>- Generic XML↔JSON schema?</div>
<div>- Choose a subset of XMPP which can be understood (<a href="https://github.com/legastero/stanza.io">stanza.io</a>)</div>
<div>- Something else... </div>
<div><br></div>
<div><br></div>
<div><br></div>
<div>
    <br>
</div>
<div>
    <br>
</div>
<div>
    <br>
</div>

</section><section><h2>XMPP-FTW</h2>
<div>(XMPP For The Web/Win)</div>
<div><br></div>
<div>
<font color="#ffff33">https://github.com/lloydwatkin/xmpp-ftw</font><br>
</div>
<div><br></div>
<div>Started coding it up at XMPP Summit Brussels January '13</div>
<div><br></div>
<div>Written in nodejs</div>
<div><br></div>
<div>Acts as a translation layer between XMPP XML and JSON for the browser</div>
<div><br></div>
<div>Uses named events to reduce the amount of data the browser/web developer needs to work with</div>
<div><br></div>
<div><br></div>
<div><br></div>
<div><br></div></section><section><h2>What's changed?</h2>
<div>XMPP now becomes <font color="#00ff00">quick, easy, fast</font> in the browser:</div>
<div>
    <br>
</div>
<div>
    <h4>Send a message</h4>
    <pre style="margin-top: 5.0px;margin-right: 5.0px;margin-left: 10.0px;padding: 5.0px;float: left;min-height: 32.0px;">        socket.emit(
            'xmpp.chat.message',
            {
                "to": "other@example.com",
                "message": "Hello world"
            }
        )<br></pre>
<h4>Receive a chat message</h4>
<pre style="margin-top: 5.0px;margin-right: 5.0px;margin-left: 10.0px;padding: 5.0px;float: left;min-height: 32.0px;">        socket.on('xmpp.chat.message', function(data) {
            console.log('Got message from ' + data.from)
            console.log('Content was: ' + data.content)
        })</pre>
</div>
<div>Server adds very minimal overhead</div>



</section><section><h3>Features</h3>
<div style="font-size: 0.9em;">
    <div>
<ul>
<li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Login</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Basic Presence</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Roster</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Chat</span>
    </li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Multi-user chat (MUC XEP-0045)</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">XEP-0004 (data forms) support</span>  -- needs documenting<br>
</li>
    <li>
        <span style="font-size: 0.9em;line-height: 1.2em;text-align: center;letter-spacing: -0.02em;">Extensible - add your own private extensions</span>
    </li>
</ul>
<div style="text-align: left;"><br></div>
</div>
</div>

<h3>Next steps</h3>
<div style="font-size: 0.9em;">
<div>
<ul>
<li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Client errors</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Discovery (DISCO XEP-0030)</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Rich chat messages (XEP-0071)</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Chat status notifications (XEP-0085)</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Implement pubsub (XEP-0060+ )</span>
        <br>
</li>
    <li>
        <span style="font-size: 0.9em;letter-spacing: -0.02em;line-height: 1.2em;text-align: center;">Add engine.io --- support older browsers too!</span>
        <br>
</li>
</ul>
</div>
    
    
    
    
    
    
</div>




</section><section><h2>Try it yourself</h2>
<div>
    <font color="#00ff33">https://xmpp-ftw.jit.su</font>
</div>
<div>
    <br>
</div>
<h2>Manual</h2>
<div>
    <font color="#ffff00">https://xmpp-ftw.jit.su/manual</font>
</div>
<div>Presents all of the incoming/outgoing messages with example payloads</div>
<div><br></div>
<h2>Demo Client</h2>
<div>Purely javascript</div>
<div>Parses the manual and hooks on to incoming messages and gives autocomplete (with example payload) for outgoing messages
</div>
<div>
<font color="#ff0000">https://xmpp-ftw.jit.su/demo</font>
</div>


</section><section><h2>Demo</h2>
<div><i><font color="#ff0000">Where it all goes horribly wrong!</font></i></div>
<div><i><br></i></div>
<div><i><br></i></div>
<div>Login</div>
<div>Set my presence</div>
<div>Add user to my roster</div>
<div>Allow them to subscribe to my presence</div>
<div>Chat with them</div>
<div>Create a MUC room</div>
<div>Speak in the MUC</div>
<div><br></div></section><section><h2>Challenge!</h2>
<div>
    <br>
</div>
<div>Have you heard of the 15 minute CMS?</div>
<div>
    <br>
</div>
<div>Use XMPP-FTW to build a chat client in 15 minutes...</div>
<div>
    <br>
</div>
<div>
    <br>
</div>
<div>
    <br>
</div>
<h2>Questions?</h2>
</section>
			</div>
